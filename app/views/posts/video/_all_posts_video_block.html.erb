
<% post %>
<% user %>
<% clips = post.attachments.video %>
<% arr = clips[0..2] %>
<% if arr.size > 0 %>
  <% cols = 12/arr.size %>
<% else %>
  <% cols = 12 %>
<% end %>
<div class="row">
    <% arr.each do |clip| %>
      <div class="col-md-<%= cols %>">
        <%= video_tag clip.file.to_s, width: 200, height: 180 %>
        <div><%= clip.file.to_s.split('/').last %></div>
      </div>
    <% end %>
</div>

<% if clips.count > 3 %>
    <div class="row">
      <div class="col-md-2">
        <%= link_to 'All clips...',   user_post_show_all_videos_modal_path(user, post), remote: true %>
      </div>
    </div>
<% end %>



<div class="modal fade" id="post-<%= post.id %>-videos-modal">
  <div class="modal-dialog">
    <div class="modal-content posts-modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      </div>
      <div class="modal-body">
        Modal body ...
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



<script>
  $("#post-<%= post.id %>-videos-modal").on("hidden.bs.modal", function () {
    var url =  '/users/' + <%= current_user.id %> + '/posts/' + <%= post.id %> + '/refresh_posts_videos_thumbs_block';
    $.ajax({
      url: url,
      type: "GET"
    });
  });
</script>
